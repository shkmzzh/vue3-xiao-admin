import{d as x,ak as y,ag as F,r as m,o as h,L as V,e as $,f as A,a2 as o,w as r,h as _,ap as I,aq as z,a0 as B,m as d,aa as C,ab as L}from"./index-89c23a70.js";import{E as R,a as S,b as Z}from"./el-input-2b29115f.js";import{E as P}from"./el-button-9b8727b0.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";const q=t=>(C("data-v-5f08c162"),t=t(),L(),t),N={class:"login-form"},D=q(()=>d("span",{class:"text"},"还没有帐号? ",-1)),G=x({__name:"loginform",emits:["changeForm"],setup(t,{emit:f}){const g=y(),v=F(),s=m({username:"",password:""}),w=m({username:[{required:!0,message:"用户名",trigger:"blur"},{pattern:/^[a-zA-Z0-9_]{2,10}$/,message:"用户名应为2-10个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)]|[()])+$)(?!^.*[\u4E00-\u9FA5].*$)([^(0-9a-zA-Z)]|[()]|[a-z]|[A-Z]|[0-9]){8,18}$/,message:"密码格式应为8-18位数字、字母、符号的任意两种组合",trigger:"blur"}]}),u=m(),c=async a=>{a&&await a.validate((e,n)=>{e?v.setLogin(s.value).then(()=>{g.push({path:"/"})}):console.log("error submit!",n)})};function E(){f("changeForm",!1)}function i({code:a}){a==="Enter"&&c(u.value)}return h(()=>{window.document.addEventListener("keypress",i)}),V(()=>{window.document.removeEventListener("keypress",i)}),(a,e)=>{const n=R,p=S,b=P,k=Z;return $(),A("div",N,[o(k,{ref_key:"ruleFormRef",ref:u,model:s.value,rules:w.value},{default:r(()=>[o(p,{prop:"username"},{default:r(()=>[o(n,{"prefix-icon":_(I),placeholder:"用户名",clearable:"",modelValue:s.value.username,"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.username=l)},null,8,["prefix-icon","modelValue"])]),_:1}),o(p,{prop:"password"},{default:r(()=>[o(n,{"prefix-icon":_(z),placeholder:"密码",clearable:"",type:"password","show-password":"",modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.password=l)},null,8,["prefix-icon","modelValue"])]),_:1}),o(p,null,{default:r(()=>[o(b,{type:"primary",onClick:e[2]||(e[2]=l=>c(u.value))},{default:r(()=>[B("登录")]),_:1})]),_:1})]),_:1},8,["model","rules"]),d("div",{class:"sub-link"},[D,d("span",{class:"to-create",onClick:E},"创建新帐号")])])}}});const H=U(G,[["__scopeId","data-v-5f08c162"]]);export{H as default};
